---
title: Package basics
layout: default
output: bookdown::html_chapter
---

# Package metadata {#description}

The job of the `DESCRIPTION` file is to store important metadata about your package. In the early stages of package development, the most important thing that the `DESCRIPTION` does is store which other packages your package needs to work. 

When you create a new package with `create()` devtools automatically creates a minimal `DESCRIPTION` that contains everything you need to get started. You don't need to worry about the `DESCRIPTION` until you need to.

The `DESCRIPTION` is particularly important if you plan on releasing your package, because it lays out who can use it (the license), and who to contact (you!) if there are any problems.

## A minimal `DESCRIPTION` file

`devtools::create()` builds a `DESCRIPTION` file that looks like this:

    Package: package-name
    Title: What the package does (short line)
    Version: 0.1
    Authors@R: "First Last <first.last@example.com> [aut, cre]"
    Description: What the package does (paragraph)
    Depends: R (>= 3.1.0)
    License: What license is it under?
    LazyData: true

This is the critical subset of package metadata: what it's called (`Package`), what it does (`Title`, `Description`), what version it is (`Version`), who's allowed to use and distribute it (`License`), and who wrote it (`Author@R`).

## What does the package do?

* `Package`: name of the package. Should be the same as the directory name.

* `Title`: a one line description of the package.

* `Description`: a more detailed paragraph-length description.


### Naming tips {#naming}

The hardest thing about creating a new package is coming up with a good name. There's only one formal requirement:

* The package name can only consist of letters and numbers, and must start
  with a letter.

But if you're planning on releasing your package to the wild, I think it's worth a few minutes brainstorming names. I have two recommendations:

* Pick a unique name so you can easily google it. This makes it easy for 
  potential users to find your package, and it makes it easier for you to
  see who's using your package.

* Avoid using both upper and lower case letters: they make the package name
  hard to type and hard to remember. For example, I can never remember if it's
  `Rgtk2` or `RGTK2` or `RGtk2`.

Some strategies I've used in the past to create packages names:

* Find a name evocative of the problem and modify it so that it's unique:
  `plyr` (generalisation of apply tools), `lubridate` (makes dates and times
  easier), `mutatr` (mutable objects), `classifly` (high-dimensional views of
  classification).

* Use abbreviations: `lvplot` (letter value plots), `meifly` (models explored
  interactively).

* Add an extra R: `stringr` (string processing), `tourr` (grand tours), `httr`
  (HTTP requests).

## What does the package need?

```{r, eval = FALSE}
# Default to imports
use_package("Rcpp")
use_package("Rcpp", "LinkingTo")
```

http://cran.r-project.org/doc/manuals/R-exts.html#Package-Dependencies

* `Depends`
* `Suggests`
* `Imports`
* `Enhances`
* `LinkingTo`

You can also list other requirements (outside of R) in `SystemRequirements`. But this is basically only useful as a quick reference - you'll also need to include detailed information in a readme.

## Who wrote the package?

Instead of `Maintainer` and `Author`, you can `Authors@R`, which takes a vector of `person()` elements.  Each person object specifies the name of the person and their role in creating the package:

* `aut`: full authors who have contributed much to the package

* `ctb`: people who have made smaller contributions, like patches.

* `cre`: the package creator/maintainer, the person you should bother if you
  have problems

Other roles are listed in the help for person. Using `Authors@R` is useful when your package gets bigger and you have multiple contributors that you want to acknowledge appropriately. The equivalent `Authors@R` syntax for plyr would be:

      Authors@R: person("Hadley", "Wickham", role = c("aut", "cre"))

As well as providing your email address, it's also a good idea to list other resources avaialble for help. You can list urls in `URL` Multiple urls can be separated with a comma. `BugReports` takes a url to where bug reports should be submitted.

## Who can use it? (`LICENSE`)

`License`: a standard abbreviation for an open source license, like `GPL-2` or `BSD`.

A complete list of abbreviations (as of `r R.version.string`) is:

```{r, results='asis', echo = FALSE}
licenses <- read.dcf(file.path(R.home("share"), "licenses", "license.db"))
licenses <- as.data.frame(licenses, stringsAsFactors = FALSE)
licenses <- licenses[order(licenses$Name, licenses$Version), ]
licenses[is.na(licenses)] <- ""
has_abbrev <- subset(licenses, Abbrev != "")
knitr::kable(has_abbrev[c("Name", "Version", "Abbrev")], row.names = FALSE)
```

If you are using a non-standard license, put `file LICENSE` and then include the full text of the license in a `LICENSE`.

## Other components

* `Version`: the version number, which should be of the the form 
  `major.minor.patchlevel`. This is most important when releasing your package. 
  See [version numbers](#version) for more deatils.

* `LazyData`. Described in [external data](#data).

There are a number of other less commonly used fields like `KeepSource`, `OS_type` and `Language`. A complete list can be found in the [R extensions manual][description].

## Collation order {#collate}

R loads files in alphabetical order. Unfortunately not every alphabet puts letters in the same order, so you can't rely on alphabetic ordering if you need one file loaded before another. The order in which files are loaded doesn't matter for most packages. But if you're using S4, you'll need to make sure that classes are loaded before subclasses and generics are defined before methods.

Rather than relying on alphabetic ordering, roxygen2 provides an explicit way of saying that one file must be loaded before another: `@include`. The `@include` tag gives a space separated list of file names that should be loaded before the current file:

```{r, eval = FALSE}
#' @include class-a.r
setClass("B", contains = "A")
```

If any `@include` tags are present in the package, roxygen2 will set the `Collate` field in the `DESCRIPTION`, which ensures that files are always loaded in the same order.

[description]: http://cran.r-project.org/doc/manuals/R-exts.html#The-DESCRIPTION-file
